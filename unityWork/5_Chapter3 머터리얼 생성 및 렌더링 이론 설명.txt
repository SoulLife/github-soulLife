※ 머터리얼 생성
프로젝트 뷰에서 04.Images 폴더의 하위 폴더로 Materials 폴더를 생성한다. 이 Materials 폴더는 유니티 에디터의 예약 폴더로서 반드시 대소문자를 지켜야 하고 복수형으로 작성해야 한다. Materials 폴더를 선택하고 마우스 오른쪽 버튼을 클릭한 후 팝업된 컨텍스트 메뉴에서 [Create] > [Material]을 선택하거나 프로젝트뷰의 [+]툴 버튼을 클릭해 메뉴에서 [Material]을 선택하면 새로운 머터리얼이 생성된다. 

머터리얼과 같은 에셋의 이름을 정하는 방법은 늘 고민스러울 때가 많다. 개발자의 성향에 따라 m 또는 mt와 같은 접두사(Prefix)나 접미사(Postfix)를 붙여서 명명하는 경우도 있으나 유니티는 각에셋의 종류를 식별하기 위한 아이콘이 대단히 잘 갖춰져있다. 따라서 각 에셋 앞에 표기된 아이콘을 통해 어떤 에셋인지 식별하기를 권장한다. 여기서는 머터리얼의 이름을 Floor로 지정한다. 





※ Albedo, Normal Map 적용
이제 Floor 머터리얼에 텍스처 이미지를 지정해보자. 머터리얼을 선택하면 인스펙터 뷰에서 선택한 머터리얼의 속성을 볼 수 있다. 프로젝트 뷰에서 Floor 머터리얼을 선택한 후 다음 그림과 같이 04.Images/YughuesFreeMetalMaterials/Textures의 T_10_Diffuse이미지를 Albedo 슬롯으로 드래그앤드 드롭해 연결하고 normal 이미지는 Normal Map 슬롯에 연결한다. 인스펙터 뷰 아래에 있는 프리뷰(Preview)에서 Sphere 모델을 통해 텍스처가 입혀진 모델의 이미지를 미리 볼 수 있다. 

머터리얼의 텍스처를 지정하는 또 다른 방식은 텍스처 슬롯 바로 옆에 있는 원(이후 브라우저 버튼이라 지칭함)을 클릭해 직접 텍스처를 선택하는 것이다. 브라우저 버튼을 클릭하면 Select Texture 창이 나타나며 이곳에는 현재 프로젝트 뷰에 임포트된 모든 텍스처가 나열된다. 이 선택 창에서 원하는 텍스처를 더블 클릭해 선택할수 있다. 



팁? 텍스처 슬롯에 연결된 텍스처 확대 기능
Standard 셰이더를 선택했을 때 텍스처 슬롯에 표시되는 텍스처의 크기가 작아서 육안으로 확인하기 어려울 수 있다. Ctrl 키를 누른 채로 텍스처 슬롯을 마우스 왼쪽 버튼으로 클릭하면 해당 슬롯에 연결된 텍스처를 확대해 볼 수 있다. 





※ 머터리얼 적용 방법
완성된 머터리얼을 Floor 게임오브젝트에 적용해보자. Floor 머터리얼을 씬 뷰의 Floor 게임오브젝트로 드래그 앤드 드롭하면 텍스처가 적용된다. 

여기서 한가지 알고 넘어가야 하는 부분이 있다. Floor 머터리얼을 직접 씬 뷰의 바닥에 드래그해서 적용했지만 사실은 Floor 게임오브젝트에 있는 Mesh Renderer 컴포넌트의 Materials 속성에 Floor 머터리얼이 연결된 것이다. 

팁? Mesh Filter, Mesh Renderer 컴포넌트
애니메이션이 적용되지 않은 3D 모델은 반드시 Mesh Filter와 Mesh Renderer컴포넌트가 있다. Mesh Filter 컴포넌트는 해당 모델의 3차원 형상 정보인 메시 데이터를 갖고 있고, 이 메시 데이터를 토대로 화면에 렌더링 처리를 하는 컴포넌트가 Mesh Renderer다.
또한 유니티에서 제공하는 ! Renderer 계열의 컴포넌트는 반드시 Materials 속성이 있다. 즉 대부분의 ~ Renderer 계열의 컴포넌트는 텍스처 정보를 가진 머터리얼을 연결하는 속성이 있다는 것을 의미한다. 




※ 타일링 속성
머터리얼의 기능 가운데 텍스처를 욕실의 타일처럼 반복시키는 기능이 있다.  프로젝트 뷰의 04.Images/Materials 폴더 하위에 있는 Floor 머터리얼을 선택하고 인스펙터 뷰에 표시된 Tiling 속성의 X, Y 값을 (10, 10)으로 설정한다. 즉 한장의 텍스처를 X축으로 10번, Y축으로 10번 반복시켜 패턴화한다. 
Tiling 속성은 Main Maps 섹션에 있는 Tiling 속성을 수정해야 한다. Secondary Maps 섹션에도 Tiling 속성이 있기에 혼동하지 말아야 한다. Secondary Maps 섹션은 3D 모델의 특정 부분을 좀더 세밀하게 표현하기 위한 텍스처를 적용하는 영역이다. 




※ 프리뷰의 다양한 기능
인스펙터 뷰에서 머터리얼 정보의 아래쪽에 있는 프리뷰는 헤더 부분을 드래그하면 크기를 위아래로 조절 할 수 있으며, 헤더 부분을 클릭하면 최소화된다. 이를 다시 클릭하면 이전 크기로 보인다. 

또한 프리뷰 영역을 별도의 윈도우로 분리할 수도 있다. 프리뷰 헤더에서 마우스 오른쪽 버튼을 클릭하거나 오른쪽 끝에 있는 점 3개가 수직으로 배열된 버튼(비공식적이지만 케밥 메뉴라고 부르기도 한다)을 클릭하면 프리뷰 영역을 별도의 윈도우로 분리하는 메뉴를 볼 수 있다. 

프리뷰의 컨트롤 바에 있는 구 모양의 툴 버튼을 클릭하면 텍스처가 입혀진 Sphere 모델을 Cube, Cylinder, Donut, Quad 모델로 변경할수 있다. 텍스처를 적용하려는 3D 모델과 유사한 모델을 선택해 미리 확인해 볼 수 있다. 





※ 셰이더 및 물리 기반 셰에딩
셰이더(Shader)는 렌더링할 때 픽셀의 농담, 색조, 명암을 결정하는 프로그래밍 방식을 말한다. 쉽게 풀어 쓴다면 화면에 텍스처를 표현할 때 재질감 또는 효과를 표현하는 기능이다. 셰이더 프로그래밍은 DirectX, OpenGL에 따라 서로 다른 언어로 구현되고 3D 그래픽스의 이론적인 배경을 많이 알아야 할 정도로 깊이 있는 지식을 요구하는 분야이기도 하다. 셰에ㅣ더에 대한 자세한 이론은 이 책의 범위를 벗어난다. 따라서 이 책에서는 셰이더를 어떻게 활용하는가에 관해서만 소개한다. 

유니티는 셰이더 프로그래밍 지식이나 경험이 없더라도 손쉽게 사용할수 있게 내장 셰이더(Built in Shader) 를 제공한다. 특히 유니티 5에서 처음 선보인 물리 기반 셰이딩(PBS, Physically-Based Shading)은 물체가 가진 고유의 특성에 맞게 재질을 표현하는 것으로, 현실 세계에 존재하는 돌, 나무, 유리, 플라스틱, 금속 등과 같은 재질감을 하나의 셰이더에서 표현할수 있게 설계돼 있다. 또한, 유니티 구버전에서 사용됐던 다양한 셰이더를 하나의 셰이더로 대체하기 위해 새롭게 디자인됐다. 물론 하위 호환성을 위해 유니티 4.x 버전의 셰이더는 Legacy Shaders로 분류돼 있다. 

유니티의 기본 셰이더인 Standard 는 물리 기반 셰이더로서 다음 차트는 물리 기반 셰이더의 속성값에 따른 변화 또는 차이점을 표시한 것이다. 

유니티의 기본 셰이더인 Standard 셰이더는 물리 기반 셰이딩을 위해 다양한 옵션을 제공한다. 이 가운데 몇 가지 중요한 머터리얼 파라미터(Material Parameters )는 다음과 같다. 





※ 렌더링 모드
렌더링 모드(Rendering Mode)는 Opaque(불투명), Cutout(그물망 표현), Fade(홀로그램 효과), Transparent(투명) 의 네 가지 설정을 통해 다양한 재질감을 표현할수 있다. 

Rendering Mode 옵션		설명
Opaque				기본값으로 불투명한 텍스처를 표현하는 옵션이다. 투명한 부분이 전혀 없는 Solid 객체에 적합하다. 
Cutout				불투명한 부분과 투명한 부분을 동시에 표현하는 옵션이다. 주로 풀, 그물망 등을 표현할 때 적합하다. 
Transparent 			투명한 플라스틱 또는 유리와 같은 재질을 표현하는 옵션이다. 
Fade				투명 속성값을 가진 객체를 페이드 아웃시키는 옵션으로, 페이드 인/아웃을 애니메이션 처리할수 있다. 불투명한 객체를 부분적으로 페이드 
				아웃시킬 수 있어 홀로그램(Hologram)효과를 구현할수 있다. 


※ 알베도
알베도(Albedo)는 빛을 반사하는 정도를 말하며, 반사율이라고도 한다.유니티 5부터 도입된 물리 기반 셰이딩을 구현하기 이해 추가된 텍스처다. 즉 현실 세계에 있는 모든 물체는 각각 다른 빛 반사율을 가진것에서 착안했다. 일반적으로 가장 기본이 되는 텍스처를 연결하는 속성이다. 



※ 메탈릭 속성
메탈릭(Metallic)은 객체 표면에 금속의 재질을 표현하기 위한 텍스처다. 이 텍스처 슬롯 옆에 있는 슬라이드 값이 1에 가까워질수록 금속 재질에 가까워지는 특성이 있다. 반면 아래 그림은 메탈릭 속성을 0으로 설정했을 때의 모습이다. 


※ 노멀맵
노멀 맵(Normal Map)은 표면의 세밀한 입체감이나 질감을 표현하기 위한 텍스처의 일종으로 3D 모델링으로 많은 폴리곤(Polygon)을 소모하지 않고 같은 효과를 낼 수 있다. 노멀 맵 텍스처 슬롯의 오른쪽에 있는 속성값이 커질수록 거친 음영 효과를 낸다. 


※ 하이트맵
하이트 맵(Height Map)은 텍스처로 높낮이를 표현하는 것으로 노멀 맵과 비슷한 기능을 하지만 좀 더 돌출시켜 뒤에 있는 사물을 가리는(Occlusion)효과를 낼 수 있다. 텍스처가 연결되면 슬라이더가 표시되고 돌출되는 높이를 설정할 수 있다. 아래 이미지 중 첫번 째는 알베도만 연결된 것으로 평면적인 이미지다. 두번째 이미지는 노멀맵을 적용한 것으로 입체감이 표현됐다. 마지막 세 번째 이미지는 노멀맵 과 하이트 맵을 동시에 적용한 것으로 뒤에 있는 돌이 가려지는 효과를 볼 수 있다. 



※ 오클루전
오클루전(Occlusion)은 흑백의 텍스처로 간접조명에 의해 생기는 명암을 더욱 뚜렷이 표시해 사물의 입체감과 깊이감을 살리는데 사용한다. 오클루전 맵에 사용할 텍스처는 일반적으로 3D 모델링 툴 또는 서드파티 툴에서 추출한다. 



※ 이미션
이미션(Emission)은 스스로 빛을 방출하는 속성을 말한다. 속성값을 변경하면 객체의 표면에서 방출되는 빛의 강도와 빛의 색상을 설정할 수 있는 항목이 나타난다. 또한 하단에 전역 조명에 반영하기 위한 옵션이 나타난다. 다음 그림은 이미션 텍스처를 적용한 후의 모습으로 가운데 방사능 마크 부분만 자체 발광하는 것을 확인할 수 있다. 



※ 디테일 마스크
디테일 마스크(Detail Mask)는 Secondary Maps에 적용할 마스크를 설정하는 텍스처 슬롯이다. 특정 부분만 좀 더 세부적인 텍스처를 표현할 때 사용한다. 


정보? Standard 셰이더 세부 정보
유니티의 Standard 셰이더에 대한 세부 정보는 다음 URL을 참고한다. 
* https://docs.unity3d.com/kr/current/Manual/shader-StandardShader.html